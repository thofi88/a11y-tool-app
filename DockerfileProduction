# SECTION Dockerfile for App DEV Mode

# NOTE install node
FROM node:12.2.0 as build

# NOTE set working directory
WORKDIR /app

# NOTE include new path
ENV PATH /app/node_modules/.bin:$PATH

# NOTE install package.json components and angular cli
COPY package.json /app/package.json
RUN npm install
RUN npm install -g @angular/cli@7.3.9

# NOTE add app
COPY . /app

# NOTE generate the build
RUN ng build --output-path=dist

# NOTE install nginx as server
FROM nginx:1.16.0-alpine

# NOTE copy buildfile to nginx server
COPY --from=build /app/dist /usr/share/nginx/html

# NOTE run on port 80
EXPOSE 80

# NOTE run nginx
CMD ["nginx", "-g", "daemon off;"]

# !SECTION
